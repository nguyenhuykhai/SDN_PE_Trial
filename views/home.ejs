<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Login Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>

<body>
    <!-- Include file header.ejs -->
    <%- include('header') -%>
        <section style="background-color: #eee;">
            <div class="container py-5">
                <!-- Hiển thị message gửi từ phía Server -->
                <% if(typeof message !== 'undefined' && message !== undefined) { %>
                    <h1><%= message %></h1>
                <% } %>
                <% if(typeof error !== 'undefined' && error !== undefined) { %>
                    <h1><%= error %></h1>
                <% } %>

                <div class="row">
                    <% if(typeof data !=='undefined' && data.length> 0 && typeof user !== 'undefined' && user.token !== undefined) { %>
                        <% data.forEach(function(item){ %>
                            <div class="col-md-12 col-lg-4 mb-4 mb-lg-4">
                                <div class="card text-black">
                                    <img src="<%= item.thumbnail %>" class="card-img-top" alt="iPhone" />
                                        <div class="card-body">
                                            <div class="text-center mt-1">
                                                <h4 class="card-title"><%= item.title %></h4>
                                                <h6 class="mb-1 pb-3"><%= item.titleDescription %></h6>
                                            </div>
    
                                            <div class="text-center">
                                                <div class="p-3 mx-n3 mb-4" style="background-color: #eff1f2;">
                                                    <h5 class="mb-0 text-uppercase">Mô tả</h5>
                                                </div>
    
                                                <div class="d-flex flex-column mb-4">
                                                    <% if (item.type=='free' ) { %>
                                                        <span class="h1 mb-0 text-uppercase">Miễn phí</span>
                                                    <% } else { %>
                                                        <span class="h1 mb-0 text-uppercase"><span>Giá tiền: </span><%= item.amount %></span>
                                                    <% } %>
                                                </div>
                                            </div>
    
                                            <div class="d-flex flex-row">
                                                <form action="/course/<%= item._id %>" method="POST">
                                                    <button type="submit" class="btn btn-primary flex-fill me-1" data-mdb-ripple-color="dark">Xem thêm</button>
                                                    <input type="hidden" name="token" value="<%= user.token %>">
                                                    <input type="hidden" name="courseId" value="<%= item._id %>">
                                                </form>
                                            </div>                                            
                                        </div>
                                </div>
                            </div>
                        <% }) %>
                    <% } else { %>
                            <div class="d-flex align-items-center"><strong>Loading...</strong>
                                <div class="spinner-border ms-auto" role="status" aria-hidden="true"></div>
                            </div>
                    <% } %>
                </div>
            </div>
        </section>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <script src="http://getbootstrap.com/dist/js/bootstrap.min.js"></script>
        <% if (typeof user !="undefined" ) { %>
            <script>
                localStorage.setItem('_id', <% - JSON.stringify(user._id) %>)
                localStorage.setItem('username', <% - JSON.stringify(user.username) %>)
                localStorage.setItem('token', <% - JSON.stringify(user.token) %>)
            </script>
        <% } %>
</body>

</html>